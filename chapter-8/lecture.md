## Лучшие практики проектирования СУБД

Сразу отмечу, что это не какие-то установленные стандарты, часть из них я выдумал из головы, часть где-то услышал :)

### Naming

В разных СУБД может быть по разному, но в основном:
- Все таблицы - единственое число
- Ключи других таблиц наименуйте в формате `<table_name>_<key>`, например, есть таблица `user` с полем `id` и `order`, айди пользователя должен быть в таком случае `user_id`
- Первичные ключи всегда просто `id`

### PK

- Лучше всегда делайте искуственный первичный ключ 
- В общем случае стоит использовать UUID

### FK

В 99% случаев не нужны 
Если не верите, то есть прекрасный [доклад](https://www.youtube.com/watch?v=ttctyDDPtQU&pp=ygUjaXRhbSDQv9C10YLQtdGAINC40LHRgNCw0LPQuNC80L7QsiA%3D) на эту тему

### Constraint

На уровне СУБД стоит использовать ограничения только на unique и not null, другие не стоит использовать.

### Дефолтные поля, которые нужны почти всегда

- id uuid pk (очевидно)
- `created_at timestamp with datetime not null` (дата создания записи)
- `updated_at timestamp with datetime not null` (дата обновления записи)


### Индексы не всегда нужны 

Если в вашей таблице меньше 10 тыс. записей, то индексы по ней просто не будут применяться 

### Soft Delete

А зачем нам что-то удалять из продакшена? А в общем случае и незачем :)  

Можно использовать подход soft-delete, добавив поле `deleted_at timestamp with timezone`, если оно `null` - запись еще _жива_, иначе - удалена.
